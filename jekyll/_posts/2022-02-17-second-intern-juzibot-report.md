---
title: "2022å¯’å‡-çŽ‹å¤©ç¿-JuziBoté¡¹ç›®å¼€å‘-æœŸä¸­æŠ¥å‘Š-æ™ºèƒ½ä¿¡æ¯åŠ©ç†"
author: tianrking
categories: article
tags:
  - juzibot
image: /assets/2022/02-second-intern-juzibot-report/cover.webp

---

## æœŸä¸­æŠ¥å‘Š

### é¡¹ç›®å‚ä¸Žäºº

- å¯¼å¸ˆï¼šæ®µæ¸…åŽ
- å­¦ç”Ÿï¼šçŽ‹å¤©ç¿

### é¡¹ç›®è®¡åˆ’

1. 01/13-01/17 : æˆåŠŸè¿è¡Œdingdong botï¼Œè¿è¡Œjuzibot åˆæ­¥äº†è§£juzibot æ¨¡å— å¹¶å­¦ä¹ nodejs
2. 01/18-01/25 : å¼€å§‹æ ¹æ®çŽ°æœ‰åŠŸèƒ½ä¹¦å†™æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒæ—¶æ·±å…¥äº†è§£juzibotå¯¹åº”æ¨¡å—åŠŸèƒ½
3. 01/26-02/11 : çŽ°æœ‰åŠŸèƒ½çš„å®Œå–„ä¸Žæµ‹è¯•ç”¨ä¾‹çš„æŒç»­ç¼–å†™
4. 02/12-02/22 : æŠ“å–çš„å¾®ä¿¡é—®ç­”ä¿¡æ¯ï¼Œå¹¶å®Œæˆæ•°æ®æ¸…æ´—
5. 02/23-02/27 : å¼€å‘å¥å­ç§’å›žå¯¹åº”é—®ç­”æœºå™¨äºº,å®Œæˆå¾®ä¿¡é—®ç­”çš„apiæŽ¥å…¥å¥å­ç§’å›ž

### é¡¹ç›®è¿›åº¦

- æµ‹è¯•æ¨¡å—ç¼–å†™
  - æ–‡å­—å‘é‡æœåŠ¡ âœ…
  - è¯­éŸ³è½¬æ–‡å­—æœåŠ¡ âœ…
  - æ ‡ç­¾åŠŸèƒ½æµ‹è¯• âœ…
  - æ„å›¾æµ‹è¯•  âœ…
  - åˆ é™¤æµ‹è¯•  âœ…
  - æ–‡ä»¶æµ‹è¯•  âœ…
  - æ–‡ä»¶åˆ é™¤æµ‹è¯•  âœ…
  - å…³é”®å­—æµ‹è¯• âœ…
  - æˆ‘çš„æ–‡ä»¶æµ‹è¯• âœ…
  - é‡å¯æµ‹è¯• âœ…

- å°æ©˜å­ðŸŠæŽ¥å£ç¼–å†™
  - åˆ©ç”¨ SentenceTransformers ç¼–å†™ å¥å­->å‘é‡ API æ›¿æ¢ CPM âœ…
  - æµ‹è¯•æ¡†æž¶ å¹¶å®Œæˆç¼–å†™ è¯­éŸ³->æ–‡å­— æœåŠ¡ API âœ…
  - ç¼–å†™ä¸Šè¿° API æµ‹è¯•ä»£ç å¹¶å®Œæˆ docker å°è£… âœ…

- æ•°æ®çˆ¬å–
  - å¾®ä¿¡å¹¿å‘Šå¸®åŠ©ä¸­å¿ƒ âœ…
  - è…¾è®¯å¹¿å‘Šå¸®åŠ©ä¸­å¿ƒ âœ…
  - ä¼ä¸šå¾®ä¿¡å¸®åŠ©ä¸­å¿ƒ âœ…

#### ç›¸å…³é“¾æŽ¥

- [è‡ªåŠ¨è¯­éŸ³è¯†åˆ«](https://github.com/deepdialog/easy_asr)
- [å¥å­è½¬å‘é‡](https://github.com/deepdialog/easy_sts)
- [å¾®ä¿¡å¹¿å‘Šæ•°æ®](https://github.com/tianrking/dont_ban_me/tree/master/app/1%E5%BE%AE%E4%BF%A1%E5%B9%BF%E5%91%8A%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83/awesome_version)
- [è…¾è®¯å¹¿å‘Šæ•°æ®](https://github.com/tianrking/dont_ban_me/tree/master/app/2%E8%85%BE%E8%AE%AF%E5%B9%BF%E5%91%8A%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83)
- [ä¼ä¸šå¾®ä¿¡æ•°æ®](https://github.com/tianrking/dont_ban_me/tree/master/app/3%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E5%B8%AE%E5%8A%A9%E4%B8%AD%E5%BF%83/awesome_way)

### é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### ä½¿ç”¨ä¸ç†Ÿæ‚‰çš„nodejsè¯­è¨€å®Œæˆä»»åŠ¡

- é‡åˆ°é—®é¢˜é¦–å…ˆåŽ»ç§¯æžçš„æŸ¥é˜…èµ„æ–™ï¼Œå†è¿›è¡Œå¤šç§å°è¯•ï¼Œç„¶åŽè¯¢é—®è€å¸ˆï¼ŒåŒæ—¶åœ¨è§£å†³é—®é¢˜åŽè®°å½•é—®é¢˜ï¼Œ åœ¨æ­¤è¿‡ç¨‹ä¸­å­¦ä¼šå¹¶å®žçŽ°äº†ç›¸å…³ç¼–å†™ï¼Œä¹Ÿæé«˜äº†è§„èŒƒä»£ç çš„æ„è¯†ï¼Œæ„Ÿè°¢è€å¸ˆçš„è€å¿ƒå¸®åŠ©ã€‚

#### xiaojuzi ä¸Ž fastapi äº¤äº’

- æ€Žæ ·å°† wechaty æŽ¥æ”¶åˆ°çš„ æ–‡å­—/å›¾ç‰‡/è¯­éŸ³ ä¸Ž fastapi è¿›è¡Œäº¤äº’ ï¼Œ ç¡®ä¿å®ƒçš„ä¼ è¾“é«˜æ•ˆï¼Œå¯ä»¥æ¢å¤ã€‚æˆ‘åŽ»å°è¯•æž„å»ºè¯·æ±‚ï¼Œåˆæ²¡æœ‰è¾ƒå¥½çš„æŽ¥å—å·¥å…·ç”¨ä»¥ç¡®å®šæ˜¯å¦å‘é€äº†ç†æƒ³çš„æ•°æ®ã€‚æ‰€ä»¥æˆ‘ä¸å¾—ä¸å…ˆä»Ž fastapi ç«¯ç¼–å†™å¼€å§‹, é€šè¿‡å¤šæ¬¡å°è¯•ç¼–å†™å¦‚ä¸‹

    python3

    ```python
    class Item_audio(BaseModel):
        lol: Optional[str] = None
        audio_name: Optional[str] = None
        audio_data: Optional[str] = None
    
    @app.post("/api/audio/")
    async def create_item(item: Item_audio):
   
    gg=item.audio_data.replace("data:audio/silk;base64,","")
    audio_data = base64.b64decode(str(gg))
    
    ```

    nodejs

    ```js
    const audioFileBox = await msg.toFileBox()
        const audio_dir = audioFileBox.name
        await audioFileBox.toFile(audioFileBox.name, true)
        const body = {
            audio_name: audioFileBox.name,
            audio_data: "data:audio/silk;base64," + fs.readFileSync(audio_dir, 'base64')
        };
        const response = await fetch(url + '/api/audio/', {
            body: JSON.stringify(body),
            method: 'post',
            headers: { 'Content-Type': 'application/json' }
        });
    ```

#### ç¼–å†™ä¸€ä¸ª"é€æ˜Ž"çš„Dockerfile çš„å°æŠ€å·§

- ç¼–å†™ stså’Œasr apiæ—¶å€™å› ä¸ºç¨‹åºè¿è¡Œåˆæ¬¡éœ€è¦ä¸‹è½½æ¨¡åž‹, éš¾ä»¥åšåˆ°å¼€ç®±å³ç”¨ï¼Œä½¿ç”¨ COPYå‘½ä»¤åœ¨dockerhubä¸Šæ˜¾ç¤ºä¸€ä¸ªä¸æ˜Žæ–‡ä»¶ç§»å…¥ ä¸å¤Ÿé€æ˜Ž å®¹æ˜“ç»™å…¶ä»–äººä½¿ç”¨é€ æˆå›°æƒ‘ï¼Œ æœ€åŽåˆ©ç”¨shellå†…çš„æ–¹å¼æ¥å®žçŽ°

    ```bash
    RUN (echo "py codeâ€œï¼‰ | python3 
    ```

#### ç¼–å†™çˆ¬è™«çš„è¿‡ç¨‹

- åœ¨ç¼–å†™xiaojuziçš„è¯­éŸ³è½¬æ–‡å­—æ¨¡å—æ—¶å€™ï¼Œå­¦ä¼šäº† nodejs ä¸‹ fetchçš„ä½¿ç”¨ï¼Œ ä¹Ÿå¯¹ post/get è¯·æ±‚æœ‰äº†ä¸€å®šè®¤è¯†ï¼Œ ç¼–å†™çˆ¬è™«çš„æ—¶å€™ å› ä¸ºç•Œé¢æ˜¯ç”±javascriptæ¸²æŸ“å¾—åˆ°çš„æ— æ³•ä¹‹é—´requestç½‘å€ï¼Œä¹Ÿå°±æ— æ³•å®Œæˆè§£æžã€‚
  
- èµ·åˆæˆ‘æƒ³ç”¨webscrapyæ’ä»¶æŠ“å–  ä½†æ˜¯æ•ˆçŽ‡å¾ˆä½Ž ä¹Ÿä¸æ–¹ä¾¿åœ¨æ²¡æœ‰GUIçš„vpsä¸Šæ“ä½œ è¿˜éœ€è¦äººç‚¹å‡»æ˜¾ç„¶ä¸æ˜¯ç†æƒ³çš„è§£å†³æ–¹æ¡ˆ

- æŸ¥é˜…èµ„æ–™åŽæˆ‘å†³å®šé€‰ç”¨ selenium æ¡†æž¶æ¥æ¸²æŸ“ç½‘é¡µ ç„¶åŽä½¿ç”¨ beautifulsoup lxml è¿›è¡Œçˆ¬å–å’Œè§£æž è™½ç„¶å¯ä»¥é€šè¿‡ "--headless" æ–¹å¼ åœ¨vpsä¸Š è¿è¡Œ ä½†æ˜¯ä¸ºäº†ç¡®ä¿ selenium å¯ä»¥å®Œæ•´åŠ è½½å®Œä¸€ä¸ªç•Œé¢ æˆ‘éœ€è¦æ¯æ¬¡éƒ½åŠ ä¸Šè¿›äº”ç§’ç­‰å¾…æ—¶é—´ è¿™æ ·å°±ä¼šå¯¼è‡´çˆ¬å–æ—¶é—´è¿‡é•¿ è€Œä¸”æœ¬èº«æˆ‘å¹¶ä¸çŸ¥é“éœ€è¦å…·ä½“çš„æŠ“å–é‚£äº›url

    selenium é…ç½®

    ```python
    from selenium import webdriver
    from selenium.webdriver.chrome.options import Options

    options = Options()
    options.headless = True
    options.add_argument("--window-size=1920x1080")
    # options.add_argument("window-size=1920x3000");
    options.add_argument("--disable-notifications")

    options.add_argument('--headless')
    options.add_argument('--disable-gpu')#è°·æ­Œæ–‡æ¡£æåˆ°éœ€è¦åŠ ä¸Šè¿™ä¸ªå±žæ€§é¿å…ä½¿ç”¨gpuäº§ç”Ÿbug
    
    options.add_argument('disable-infobars')#éšè—"Chromeæ­£åœ¨å—åˆ°è‡ªåŠ¨è½¯ä»¶çš„æŽ§åˆ¶"
    options.add_argument('lang=zh_CN.UTF-8')      # è®¾ç½®ä¸­æ–‡
    options.add_argument('window-size=1920x3000') # æŒ‡å®šæµè§ˆå™¨åˆ†è¾¨çŽ‡
    options.add_argument('--hide-scrollbars')     # éšè—æ»šåŠ¨æ¡, åº”å¯¹ä¸€äº›ç‰¹æ®Šé¡µé¢

    driver = webdriver.Chrome("/Users/mac/Desktop/chromedriver", options=options)
    ```

    æŠ“å– å¹¶ åˆæ­¥æå–æ•°æ®

    ```python
    driver.get(url)
    time.sleep(8)
    print(driver.title)
    soup = BeautifulSoup(driver.page_source, 'lxml')
    if len(soup.find_all(attrs={'class': 'guide__title'})):            
        f.write(str(soup.find_all(attrs={'class': 'guide__title'})))
        f.write(",")
        f.write(url)
        f.write('\n')
    f.close()
    ```

    è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºçŽ°é—®é¢˜,è¿™æ—¶å€™å°±å¯ä»¥æ‰“å° selenium æŠ“å–æ—¶å€™çš„ç½‘é¡µæˆªå›¾

    ```python
    driver.get_screenshot_as_file('1.png')
    ```

    ä¸ç¨³å®š ï¼Œ è€Œä¸”ä½Žæ•ˆ
  
- çˆ¬è™«çš„ç›®çš„æ˜¯æŠ“å–æ•°æ® æ—¢ç„¶éš¾ä»¥æ¸²æŸ“å¾—åˆ°æ¸²æŸ“ç•Œé¢ ä¸å¦‚ç›´æŽ¥ä»Žæ•°æ®è¯·æ±‚åˆ†æžçš„è§’åº¦æ¥å¯»æ‰¾è§£å†³æ€è·¯ ï¼Œ äºŽæ˜¯å°±å†³å®šå°è¯•æŠ“åŒ…å¯»æ‰¾è§£å†³æ–¹æ¡ˆ. é¦–å…ˆé€šè¿‡ æŠ“åŒ…çš„åˆ° post åˆ°æ•°æ® æž„é€  curlè¯·æ±‚ æµ‹è¯•æ˜¯å¦å¯ä»¥çš„åˆ°æ­£ç¡®çš„å“åº”ã€‚

    ```bash

    curl 'https://open.work.weixin.qq.com/help2/getQusList?lang=zh_CN&ajax=1&f=json&random=310321' \
        -H 'authority: open.work.weixin.qq.com' \
        -H 'sec-ch-ua: " Not A;Brand";v="99", "Chromium";v="98", "Microsoft Edge";v="98"' \
        -H 'accept: application/json, text/plain, */*' \
        -H 'content-type: application/json' \
        -H 'sec-ch-ua-mobile: ?0' \
        -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36 Edg/98.0.1108.51' \
        -H 'sec-ch-ua-platform: "macOS"' \
        -H 'origin: https://open.work.weixin.qq.com' \
        -H 'sec-fetch-site: same-origin' \
        -H 'sec-fetch-mode: cors' \
        -H 'sec-fetch-dest: empty' \
        -H 'referer: https://open.work.weixin.qq.com/help2/pc/15405?person_id=1' \
        -H 'accept-language: zh-TW,zh-CN;q=0.9,zh;q=0.8,en;q=0.7,en-GB;q=0.6,en-US;q=0.5,zh-HK;q=0.4' \
        -H 'cookie: pgv_pvid=3686684000; pac_uid=0_3cbd911c9ce83; pgv_info=ssid=s2798911544; pgv_pvi=4654092288; pgv_si=s6420471808; wwrtx.ref=direct; wwrtx.c_gdpr=0; wwrtx.refid=413075501944711; __utma=114362329.896737070.1644833346.1644833346.1644833346.1; __utmc=114362329; __utmz=114362329.1644833346.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); Hm_lvt_f2ba645ba13636ba52b0234381f51cbc=1644833347; Hm_lpvt_f2ba645ba13636ba52b0234381f51cbc=1644833970; uin=o0508195902; skey=@sEUq3VJWl; RK=hA9xBYtEcN; ptcz=f4917937db9babf5c19203049471a3e4d45ea1fe7b770ef9ea93e47e33c0c0f5; wwrtx.i18n_lan=cht' \
        --data-raw '{"person_id":1,"doc_id":15405}' \
        --compressed
    ```

    è¿™æ˜¯æ¯”è¾ƒæ‚ä¹±å¤æ‚çš„ï¼Œæˆ‘å°è¯•ç»™å®ƒç®€åŒ– åˆ åŽ»å¯¹äºŽèŽ·å–æ•°æ®è€Œè¨€ä¸å¿…è¦çš„éƒ¨åˆ†ï¼Œçš„åˆ°ä¸‹é¢çš„æ–¹æ³•

    ```bash
    #https://open.work.weixin.qq.com/help2/getQusList?lang=zh_CN&ajax=1&f=json&random=569866 è¿™ä¸ªæ˜¯æµè§ˆå™¨è®¿é—®çš„ç½‘å€ ä¸‹é¢æ˜¯å®žé™…çš„è¯·æ±‚
    curl 'https://open.work.weixin.qq.com/help2/getQusList?lang=zh_CN&ajax=1&f=json&random=310321' \
    -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36 Edg/98.0.1108.51' \
    -H 'referer: https://open.work.weixin.qq.com/help2/pc/15405?person_id=1' \
    --data-raw '{"person_id":1,"doc_id":15405}' 
    ```

    ä¸ºäº†ç¡®ä¿å¯é æ€§ï¼Œ curlå¤åˆ¶ç²˜è´´éžå¸¸æ–¹ä¾¿ï¼Œ åœ¨å¦ä¸€å°vpsä¸Šä¹Ÿè¿›è¡Œäº†æµ‹è¯•ï¼Œçš„ç¡®å¯ä»¥çš„åˆ°æ­£ç¡®çš„æ•°æ®è¿”å›žï¼Œä¸‹é¢å°±æ˜¯æŠŠå®ƒè½¬æ¢æˆ requests çš„è¯·æ±‚ èžå…¥åˆ°ä»£ç é‡Œã€‚

    ```bash
    headers = {
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36 Edg/98.0.1108.51',
    'referer': 'https://open.work.weixin.qq.com/help2/pc/15405?person_id=1',
    }

    params = (
        ('lang', 'zh_CN'),
        ('ajax', '1'),
        ('f', 'json'),
        ('random', '310321'),
    )

    data = '{"person_id":1,"doc_id":15405}'
    ```

    æ­¤æ—¶å°±å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°è¯·æ±‚çš„ç»“æž„ï¼Œå¤§æ¦‚çŽ‡å¯ä»¥çŒœåˆ° è¦ä¹ˆè¿™ä¸ª random æ˜¯ä¸ªå‡çš„ random å®žé™…ä¸Šæ˜¯åšæ–‡ä»¶ç´¢å¼•çš„ï¼Œ è¦ä¹ˆå®ƒæ˜¯ä¸ªçœŸçš„random åšé˜²æ­¢çˆ¬è™«æ£€æµ‹ç”¨ï¼Œè€Œæˆ‘ä»¬è¦çš„å¯¹åº”æ–‡æ¡£å­˜å‚¨å°±ä¸º doc_id ã€‚ é€šè¿‡è„šæœ¬æµ‹è¯•ä¸€ä¸‹ï¼Œå¾ˆå¿«å°±ç¡®å®šäº† doc_id å¯¹åº”çš„çœŸçš„æ˜¯doc è€Œrandomä¹Ÿæ˜¯çœŸçš„éšæœº ðŸ˜‚ðŸ˜‚ðŸ˜‚ðŸ˜‚ðŸ˜‚ äºŽæ˜¯ æˆ‘ä»¬å¯ä»¥åœ¨æœ€ç®€çš„åŸºç¡€ä¸Šå†ååŠ å›žä¹‹å‰çš„å‚æ•° ä½œç”¨æ˜¯ä¼ªè£…çš„æ›´çœŸå®ž é˜²æ­¢è¢«ban å¾—åˆ°ä¸‹è¾¹æœ€ç»ˆæž„é€ ä»£ç 

    ```python
    import requests
    headers = {
        'authority': 'open.work.weixin.qq.com',
        'sec-ch-ua': '" Not A;Brand";v="99", "Chromium";v="98", "Microsoft Edge";v="98"',
        'accept': 'application/json, text/plain, */*',
        'content-type': 'application/json',
        'sec-ch-ua-mobile': '?0',
        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36 Edg/98.0.1108.51',
        'sec-ch-ua-platform': '"macOS"',
        'origin': 'https://open.work.weixin.qq.com',
        'sec-fetch-site': 'same-origin',
        'sec-fetch-mode': 'cors',
        'sec-fetch-dest': 'empty',
        'referer': 'https://open.work.weixin.qq.com/help2/pc/15405?person_id=1',
        'accept-language': 'zh-TW,zh-CN;q=0.9,zh;q=0.8,en;q=0.7,en-GB;q=0.6,en-US;q=0.5,zh-HK;q=0.4',
        'cookie': 'pgv_pvid=3686684000; pac_uid=0_3cbd911c9ce83; pgv_info=ssid=s2798911544; pgv_pvi=4654092288; pgv_si=s6420471808; wwrtx.ref=direct; wwrtx.c_gdpr=0; wwrtx.refid=413075501944711; __utma=114362329.896737070.1644833346.1644833346.1644833346.1; __utmc=114362329; __utmz=114362329.1644833346.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); Hm_lvt_f2ba645ba13636ba52b0234381f51cbc=1644833347; Hm_lpvt_f2ba645ba13636ba52b0234381f51cbc=1644833970; uin=o0508195902; skey=@sEUq3VJWl; RK=hA9xBYtEcN; ptcz=f4917937db9babf5c19203049471a3e4d45ea1fe7b770ef9ea93e47e33c0c0f5; wwrtx.i18n_lan=cht',
    }

    params = (
        ('lang', 'zh_CN'),
        ('ajax', '1'),
        ('f', 'json'),
        ('random', '22340'),
    )

    for num in range(begin,end):
        ## num ç¼–å·ä¸ºä¸»æ–‡æ¡£å¯¹åº”åºå·
        data = '{"person_id":1,"doc_id":%s}' % str(num)

        res = requests.post('https://open.work.weixin.qq.com/help2/getQusList', headers=headers, params=params, data=data)

    ```

    è¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„éåŽ†äº†ï¼Œä½†æ˜¯ æˆ‘ä»¬ä¸çŸ¥é“åˆ°åº•å“ªäº›URLæ‰æœ‰æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ï¼ŒäºŽæ˜¯å°±éœ€è¦è¿›è¡Œæš´åŠ›éåŽ†ï¼Œ è¿™æ—¶å€™ python çš„å¼‚å¸¸å¤„ç†æ¨¡å—å˜å¾—éžå¸¸é€‚ç”¨ ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ æ˜¯å¦è¿”å›žå€¼æ­£å¸¸ è‹¥å¼‚å¸¸ç›´æŽ¥è¯·æ±‚ä¸‹ä¸€ä¸ªå³å¯ï¼Œ ç„¶åŽå°†æ­£ç¡®çš„æ•°æ®åˆ©ç”¨pandasç›´æŽ¥æ•´ç†æˆcsv

    ```python
        try:
            Q = res['data']['helpdocument']['qusList'][0]['title']
            A_md = res['data']['helpdocument']['qusList'][0]['content_md']
            df = pd.DataFrame(data=[
                    [Q,A_md]],
                    columns = ['Q','A'],
                    )
            df.to_csv('data_all_in_one/QA_7k.csv', mode='a', header=False)
            
        except:
            continue
    ```

    æ­¤æ—¶ åŸºæœ¬çš„éƒ¨åˆ†å·²ç»å®Œæˆï¼Œ ä½†æ˜¯é€ä¸ªéåŽ†é€Ÿåº¦è¿˜æ˜¯å¤ªæ…¢ äºŽæ˜¯èžå…¥äº†å¤šçº¿ç¨‹

    ```python
    def request_api(T_name,begin,end):
        xxx
    try:
        begin = 13000
        # 15000-16000 1k  # 16000-17000 2k # 17000-18000 3k # 18000-19000 4k
        # 19000-20000 5k # 14000-15000 6k $ 13000-14000 7k
        end = 14000
        sum = end - begin
        step = 4
        time = int(sum / step)

        ## è¿™é‡Œå¯ä»¥å¾ªçŽ¯ ä½†æ˜¯æ²¡å¿…è¦ 
        _thread.start_new_thread(request_api, ("Thread-1", 0+begin , begin+time) )
        _thread.start_new_thread(request_api, ("Thread-2", begin + time , begin + time*2) )
        _thread.start_new_thread(request_api, ("Thread-3", begin + time*2 , begin + time*3) ) 
        _thread.start_new_thread(request_api, ("Thread-4", begin + time*3,  begin + time*4) )
    except:
        print ("Error: æ— æ³•å¯åŠ¨çº¿ç¨‹")
    ```

    æ­¤æ—¶ä¸€ä¸ªå¤šçº¿ç¨‹çš„çˆ¬è™«å°±å®žçŽ°äº† ï¼Œ ç›¸æ¯” selenium æ–¹æ³• é€Ÿåº¦å¿«äº†æ•°åå€ ï¼Œæ•°æ®å¹²å‡€çš„å¤šï¼Œ è€Œä¸”ä»£ç éžå¸¸ç®€æ´ ä½¿ç”¨æ—¶å€™ä¿®æ”¹ begin end å°±å¯ä»¥å•¦ã€‚ é•¿æ—¶é—´çˆ¬å–å®¹æ˜“è¢«å°ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç»™å®ƒåšæˆå…¨è‡ªåŠ¨çš„ã€‚ çˆ¬åŽ»å®Œæ•°æ® æœ€å¥½æ£€æµ‹ä¸€ä¸‹ csvã€‚

    åˆ†æ®µçˆ¬å–å¹¶æ•´ç†æˆcsvåŽ å¯ä»¥ç®€å•çš„ç”¨pandaså†æ¬¡æ¸…æ´—å¹¶åˆå¹¶çš„åˆ°æœ€æ€»æ•°æ®

    å¦å¤–ä¸¤ä¸ªç½‘ç«™çˆ¬åŽ»çš„æ€è·¯ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä¸åŒçš„æ˜¯æ•°æ®åˆæ­¥æ¸…æ´—çš„è¿‡ç¨‹ä¸ä¸€æ ·ï¼Œæœ‰è¶£çš„æ˜¯ï¼Œå¾®ä¿¡å¹¿å‘Šå¸®åŠ©ä¸­å¿ƒ è¯·æ±‚åŽç›´æŽ¥ä¸‹è½½åŒ…å«æ‰€æœ‰ä¿¡æ¯çš„json åœ¨æµè§ˆå™¨é‡Œé¢è®¿é—®æ—¶å€™è½¬åœˆ æ˜¾ç¤ºå‡ºæ¥åŽç‚¹å‡»æŠ“åŒ… æ˜¯æ— æ³•æŠ“å–çš„ å› ä¸ºæ ¹æœ¬å°±æ²¡æœ‰ è¯·æ±‚æ•°æ®çš„è¯·æ±‚ åªæœ‰ç»Ÿè®¡ç‚¹å‡»çš„è¯·æ±‚ æ‰€æœ‰çš„æ•°æ®éƒ½åœ¨åŠ è½½æ—¶å€™ä¸‹è½½å®Œå•¦ æ‰€ä»¥åªéœ€è¦

    ```bash
    url = 'https://ad.weixin.qq.com/openapi/acms_files/get?filename=data'
    rec = requests.get(url)
    f = open('data_all.txt','w')
    f.write(rec.text)
    f.close()
    ```

    å†ç”¨ json æå– å’Œ pandas æ¸…æ´—å°±okäº†

### è§†é¢‘å±•ç¤º

{% include iframe.html src="https://youtu.be/FR00ixIftOk" %}

### ç­”è¾©æŠ¥å‘Š

{% include iframe.html src="/assets/2022/02-second-intern-juzibot-report/juzibot_report_2_w0x7ce_compressed.pdf" %}

### é¡¹ç›®é“¾æŽ¥

- é¡¹ç›®é“¾æŽ¥ï¼š[https://github.com/deepdialog/xiaojuzi](https://github.com/deepdialog/xiaojuzi)

- è”ç³»æ–¹å¼ï¼šTelegram: @qozob |  Email: me@w0x7ce.eu

> Author: [@tianrking](https://github.com/tianrking)
> Code: [@tianrking/juzibot](https://github.com/tianrking/xiaojuzi)
